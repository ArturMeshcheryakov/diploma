!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);var n=(e,t)=>{const r=t.querySelector("a");let n;n=r?r.getAttribute("href"):t.getAttribute("data-href");""===n.split("#")[0]&&(e.preventDefault(),document.querySelector(n).scrollIntoView({behavior:"smooth",block:"start"}))};var o=(e,t=!0)=>{const r=document.querySelectorAll(".popup");(e=>{r.forEach(r=>{r.id===e?(r.style.display="block",(e=>{const t=e.querySelector(".form-wrapper");t.animate([{opacity:"0"},{opacity:"1"}],600).addEventListener("finish",()=>t.style.opacity="1")})(r),t&&r.addEventListener("click",e=>{const t=e.target,o=t.closest(".form-content"),c=t.closest(".close_icon"),l=t.closest(".close-btn");(!o||c||l)&&"gift"===r.id&&document.querySelector(".fixed-gift").classList.remove("hide"),o&&!c||(r.style.display="none"),l&&(l.closest("#gift")&&n(e,l),r.style.display="none")})):r.style.display="none"})})(e)};var c=()=>{document.querySelectorAll(".js-modal").forEach(e=>{e.addEventListener("click",t=>{let r=e.getAttribute("data-popup");r=r.slice(1),"gift"===r&&t.target.closest(".fixed-gift").classList.add("hide"),o(r)})})};var l=()=>{const e=document.querySelector(".popup-menu"),t=document.querySelector(".menu__mobile"),r=document.querySelector(".head"),o=()=>{window.screen.width<768&&(window.pageYOffset>r.offsetHeight?t.classList.add("fixed"):t.classList.remove("fixed"))},c=()=>{window.addEventListener("scroll",o)};t.addEventListener("click",t=>{const r=t.target,o=r.closest(".menu-button img"),c=r.closest(".close-menu-btn img"),l=r.closest(".scroll");(o||c)&&e.classList.toggle("active"),l&&(n(t,l),e.classList.remove("active"))}),window.addEventListener("resize",()=>{window.screen.width<768?c():t.classList.remove("fixed")}),c()};var a=()=>{const e=document.getElementById("totop"),t=document.querySelector(".header-main"),r=()=>{const e=window.pageYOffset/40;window.pageYOffset>0&&(window.scrollBy(0,-e),setTimeout(r,0))};e.addEventListener("click",e=>{e.preventDefault(),r()}),window.addEventListener("scroll",()=>{window.pageYOffset>t.offsetHeight?e.classList.add("active"):e.classList.remove("active")})};var s=()=>{const e=document.querySelector(".calc"),t=document.getElementById("price-total"),r=document.querySelector(".promocode"),n=document.querySelector('.calc [name="card-type"]'),o=document.querySelector('.calc [name="club-name"]'),c={mozaika:{1:1999,6:9900,9:13900,12:19990},schelkovo:{1:2999,6:14990,9:21990,12:24990}};if(e){const l=e=>{const t=document.querySelectorAll(e);let r="";return t.forEach(e=>{e.checked&&(r=e.value)}),r},a=(t,n,o=!1)=>{let c=!1,l=!0,a=e.querySelectorAll("input");const s=+t.textContent,i=e=>{a.forEach(t=>{t.disabled=e})};""!==r.value&&"ТЕЛО2019"===r.value&&(n=Math.round(n-n/100*30)),o&&(n=Math.round(n/70*100)),s>n?l=!1:s<n&&(l=!0),c=l?setInterval((function(){1*t.innerHTML+50>=n?(t.innerHTML=n,clearInterval(c),i(!1)):(t.innerHTML=Math.round(1*t.innerHTML+50),i(!0))})):setInterval((function(){1*t.innerHTML-50<=n?(t.innerHTML=n,clearInterval(c),i(!1)):(t.innerHTML=Math.round(1*t.innerHTML-50),i(!0))}))},s=(e,r)=>{for(let n in c)if(e===n){const e=c[n];for(let n in e)r===n&&a(t,e[n])}};e.addEventListener("click",e=>{const t=e.target,r=t.closest('.calc [name="card-type"]'),n=t.closest('.calc [name="club-name"]');r&&s(l('.calc [name="club-name"]'),r.value),n&&s(n.value,l('.calc [name="card-type"]'))});let i=!1;r.addEventListener("change",e=>{const r=+t.textContent;let n=!1;""!==e.target.value&&"ТЕЛО2019"===e.target.value?(i=!0,a(t,r)):e.target.value="",""===e.target.value&&i&&(i=!1,n=!0,a(t,r,n))}),s(o.value,n.value)}};var i=()=>{const e=document.querySelectorAll("form");e.forEach(e=>{(e=>{e.addEventListener("submit",r=>{r.preventDefault();const n=[...e.elements].filter(e=>"button"!==e.tagName.toLowerCase()&&"button"!==e.type),c=e.querySelectorAll(".club");let l=!0,a=!1,s=r.submitter;if(c.forEach(e=>{e.classList.remove("error"),e.querySelector('[name="club-name"]').checked&&(a=!0)}),n.forEach(e=>{e.name&&"name"===e.name?e.value.match(/^[^a-zA-Z][^a-zA-Z0-9-_\.]{1,20}$/)?e.style.border="2px solid green":(e.style.border="2px solid red",l=!1):e.name&&"phone"===e.name?e.value.match(/^\+?[78]([-\s()]*\d){10}$/)?e.style.border="2px solid green":(e.style.border="2px solid red",l=!1):e.name&&"check"===e.name?e.checked?e.closest(".personal-data").classList.remove("error"):(e.closest(".personal-data").classList.add("error"),l=!1):e.name&&"club-name"===e.name&&(a?l=!0:e.checked?e.closest(".club").classList.remove("error"):(e.closest(".club").classList.add("error"),l=!1))}),l){const r=new FormData(e),c=document.querySelector("#thanks .form-content");let l=c.querySelector("h4"),a=c.querySelector("p"),i={};l.innerHTML="Отправка!",a.innerHTML="Идет отпрака данных. <br> Данные отправляются в ближайшее время придет ответ.",c.querySelector("button").style.opacity=0,o("thanks",!1),s.disabled=!0,r.forEach((e,t)=>{i[t]=e});const u=()=>{n.forEach(e=>{"name"!==e.name&&"phone"!==e.name||(e.value="",e.style.border="",s.disabled=!1)})};t(i).then(e=>{if(200!==e.status)throw new Error("status network not 200");l.innerHTML="Спасибо!",a.innerHTML="Ваша заявка отправлена. <br> Мы свяжемся с вами в ближайшее время.",c.querySelector("button").style.opacity=1,o("thanks"),u()}).catch(()=>{l.innerHTML="Ошибка!",a.innerHTML="Что-то пошло не так. <br> Мы уже разбираемся с этим.",c.querySelector("button").style.opacity=1,o("thanks"),u()})}})})(e)});const t=e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})};(()=>{const e=document.querySelector(".clubs-list"),t=e.querySelector("p");t.addEventListener("click",()=>e.classList.toggle("active"))})(),c(),l(),a(),s(),i()}]);